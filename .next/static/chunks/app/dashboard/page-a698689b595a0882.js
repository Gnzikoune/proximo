(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{789:function(e,t,r){Promise.resolve().then(r.bind(r,1720))},1720:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437),u=r(2265),s=r(9376),o=r(6281);function i(){let e=(0,s.useRouter)(),{user:t,isLoading:r}=(0,o.a)();return((0,u.useEffect)(()=>{if(r||t){if(t)switch(t.role){case"client":e.push("/dashboard/client");break;case"transporteur":e.push("/dashboard/transporter");break;case"admin":e.push("/admin")}}else e.push("/login")},[t,r,e]),r)?(0,n.jsx)("div",{children:"Chargement..."}):null}},6281:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return i},a:function(){return a}});var n=r(7437),u=r(2265),s=r(9376);let o=(0,u.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,u.useState)(null),[a,l]=(0,u.useState)(!0),c=(0,s.useRouter)();(0,u.useEffect)(()=>{(async()=>{let e=localStorage.getItem("user");e&&i(JSON.parse(e)),l(!1)})()},[]);let d=async(e,t)=>{l(!0);try{await new Promise(e=>setTimeout(e,1e3));let t={id:"1",name:e.split("@")[0],email:e,role:e.includes("admin")?"admin":e.includes("transporteur")?"transporteur":"client"};i(t),localStorage.setItem("user",JSON.stringify(t))}catch(e){console.error("Erreur de connexion:",e)}finally{l(!1)}};return(0,n.jsx)(o.Provider,{value:{user:r,login:d,logout:()=>{i(null),localStorage.removeItem("user"),c.push("/")},isLoading:a},children:t})},a=()=>{let e=(0,u.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=789)}),_N_E=e.O()}]);